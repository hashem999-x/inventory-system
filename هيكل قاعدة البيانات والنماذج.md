
# هيكل قاعدة البيانات والنماذج

## 1. AuditLog
- **الغرض**: تسجيل جميع الإجراءات التي تتم في النظام.
- **الحقول**:
  - `action`: نوع الإجراء الذي تم (String).
  - `user`: المستخدم الذي قام بالإجراء (ObjectId, مرجع لـ `User`).
  - `timestamp`: تاريخ ووقت الإجراء (Date, القيمة الافتراضية هي الوقت الحالي).
  - `details`: تفاصيل إضافية حول الإجراء (String).

## 2. Branch
- **الغرض**: تخزين معلومات الفروع المختلفة للمؤسسة.
- **الحقول**:
  - `name`: اسم الفرع (String, مطلوب).
  - `location`: موقع الفرع (String).
  - `phone`: رقم هاتف الفرع (String).

## 3. InventoryEntry
- **الغرض**: تسجيل إدخالات المخزون لكل منتج في فرع معين.
- **الحقول**:
  - `product`: المنتج (ObjectId, مرجع لـ `Product`).
  - `branch`: الفرع الذي يوجد به المخزون (ObjectId, مرجع لـ `Branch`).
  - `quantity`: الكمية المتوفرة (Number).
  - `expiryDate`: تاريخ انتهاء صلاحية المنتج (Date).
  - `notes`: ملاحظات إضافية حول المخزون (String).

## 4. Message
- **الغرض**: تخزين الرسائل بين المستخدمين.
- **الحقول**:
  - `from`: مرسل الرسالة (ObjectId, مرجع لـ `User`).
  - `to`: مستقبل الرسالة (ObjectId, مرجع لـ `User`).
  - `text`: نص الرسالة (String).
  - `createdAt`: تاريخ ووقت إرسال الرسالة (Date, القيمة الافتراضية هي الوقت الحالي).
  - `read`: حالة قراءة الرسالة (Boolean, القيمة الافتراضية `false`).

## 5. PriceHistory
- **الغرض**: تتبع سجل تغييرات أسعار المنتجات.
- **الحقول**:
  - `product`: المنتج الذي تغير سعره (ObjectId, مرجع لـ `Product`).
  - `oldPrice`: السعر القديم (Number).
  - `newPrice`: السعر الجديد (Number).
  - `changedBy`: المستخدم الذي قام بتغيير السعر (ObjectId, مرجع لـ `User`).
  - `changedAt`: تاريخ ووقت تغيير السعر (Date, القيمة الافتراضية هي الوقت الحالي).

## 6. Product
- **الغرض**: تخزين معلومات المنتجات.
- **الحقول**:
  - `name`: اسم المنتج (String).
  - `barcode`: الباركود الخاص بالمنتج (String).
  - `price`: سعر المنتج (Number).
  - `minStock`: الحد الأدنى للمخزون (Number).
  - `image`: رابط صورة المنتج (String).
  - `vendor`: المورد الخاص بالمنتج (ObjectId, مرجع لـ `Vendor`).

## 7. PurchaseOrder
- **الغرض**: إدارة أوامر الشراء من الموردين.
- **الحقول**:
  - `branch`: الفرع الذي قام بطلب الشراء (ObjectId, مرجع لـ `Branch`).
  - `vendor`: المورد (ObjectId, مرجع لـ `Vendor`).
  - `items`: قائمة بالمنتجات المطلوبة:
    - `product`: المنتج (ObjectId, مرجع لـ `Product`).
    - `quantity`: الكمية المطلوبة (Number).
    - `price`: سعر الشراء (Number).
  - `status`: حالة أمر الشراء (String, القيم الممكنة: "pending", "approved", "received", القيمة الافتراضية "pending").
  - `createdAt`: تاريخ ووقت إنشاء أمر الشراء (Date, القيمة الافتراضية هي الوقت الحالي).

## 8. ReorderRequest
- **الغرض**: إدارة طلبات إعادة الطلب للمنتجات.
- **الحقول**:
  - `product`: المنتج المطلوب إعادة طلبه (ObjectId, مرجع لـ `Product`).
  - `branch`: الفرع الذي قدم طلب إعادة الطلب (ObjectId, مرجع لـ `Branch`).
  - `quantity`: الكمية المطلوبة (Number).
  - `createdBy`: المستخدم الذي أنشأ الطلب (ObjectId, مرجع لـ `User`).
  - `status`: حالة طلب إعادة الطلب (String, القيم الممكنة: "pending", "ordered", "completed", القيمة الافتراضية "pending").
  - `createdAt`: تاريخ ووقت إنشاء الطلب (Date, القيمة الافتراضية هي الوقت الحالي).

## 9. Return
- **الغرض**: تسجيل المرتجعات (من العملاء أو إلى الموردين).
- **الحقول**:
  - `type`: نوع المرتجع ("customer" أو "vendor", مطلوب).
  - `product`: المنتج المرتجع (ObjectId, مرجع لـ `Product`).
  - `quantity`: الكمية المرتجعة (Number).
  - `reason`: سبب المرتجع (String).
  - `createdBy`: المستخدم الذي سجل المرتجع (ObjectId, مرجع لـ `User`).
  - `createdAt`: تاريخ ووقت تسجيل المرتجع (Date, القيمة الافتراضية هي الوقت الحالي).

## 10. User
- **الغرض**: تخزين معلومات المستخدمين.
- **الحقول**:
  - `username`: اسم المستخدم (String, مطلوب, فريد).
  - `password`: كلمة المرور (String).
  - `name`: الاسم الكامل للمستخدم (String).
  - `branch`: الفرع الذي ينتمي إليه المستخدم (ObjectId, مرجع لـ `Branch`).
  - `role`: دور المستخدم ("admin", "manager", "employee", القيمة الافتراضية "employee").

## 11. Vendor
- **الغرض**: تخزين معلومات الموردين.
- **الحقول**:
  - `name`: اسم المورد (String).
  - `phone`: رقم هاتف المورد (String).
  - `email`: البريد الإلكتروني للمورد (String).



